kind: pipeline
type: docker
name: ds_pipeline

steps:
  - name: deploy
    image: plugins/docker-compose
    settings:
      docker_compose_files: docker-compose.yml
      project_name: ds_pipeline_app
      action: up
      with_registry_auth: true
      environment:
        - MYAPP_ENV=production
#   - name: build
#     image: docker/compose:1.29.2
#     commands:
#       - dockerd --host=unix:///drone/docker.sock
#       - docker compose build

#   - name: deploy
#     image: docker/compose:1.29.2
#     commands:
#       - dockerd --host=unix:///drone/docker.sock
#       - docker compose up -d
#     when:
#       branch: staging
#     depends_on:
#       - build
