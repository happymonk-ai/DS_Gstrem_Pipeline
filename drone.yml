kind: pipeline
type: docker
name: docker-compose

platform:
  os: linux
  arch: amd64

steps:
- name: build
  image: docker/compose:1.29.2
  commands:
  - apt install docker-compose-plugin
  - docker compose build

- name: deploy
  image: docker/compose:1.29.2
  commands:
  - docker compose up -d
  when:
    branch: staging
  depends_on:
  - build
