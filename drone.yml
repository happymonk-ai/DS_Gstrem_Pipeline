kind: pipeline
type: docker
name: docker-compose

steps:
- name: build
  image: docker
  commands:
  - docker-compose build

- name: deploy
  image: plugins/docker-compose
  settings:
    docker_compose_files: docker-compose.yml
    project_name: ds_gstreamer_pipeline
    action: up
    with_registry_auth: true
  when:
    branch: staging
  depends_on:
  - build
